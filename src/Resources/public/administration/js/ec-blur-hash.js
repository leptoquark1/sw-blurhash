(this.webpackJsonp=this.webpackJsonp||[]).push([["ec-blur-hash"],{EIxV:function(e,a,t){"use strict";t.r(a);var n=t("aIzF"),r=t("MQ+w");(async function(){const e=Shopware.Application.getContainer("factory").locale;return e.extend("de-DE",n),e.extend("en-GB",r),e})().catch();t("ZMv6"),t("pyVI");var s=t("ESjS"),i=t.n(s);Shopware.Component.override("sw-media-quickinfo",{template:i.a,computed:{ecbBluredImage(){const{blurhash:e,height:a,width:t}=this.item.metaData;if(!e||!Blurhash.isValid(e))return null;const n=Blurhash.decodeBlurhash(e,t,a);return Blurhash.pixelsToBase64(n,t,a)}},methods:{}});t("hSmX")},ESjS:function(e,a){e.exports='{% block sw_media_quickinfo_preview %}\n    {% parent %}\n\n    {% block sw_media_quickinfo_blurred_preview %}\n        <sw-media-collapse\n            v-if="item.hasFile && ecbBluredImage"\n            :expandOnLoading="false"\n            :title="$tc(\'sw-media.sidebar.sections.preview\')"\n        >\n            {% block sw_media_quickinfo_blurred_preview_content %}\n                <template #content>\n                    <div>\n                        {% block sw_media_quickinfo_blurred_preview_item %}\n                            <img :src="ecbBluredImage" alt="Blurred version the original Image" class="hidden">\n                        {% endblock %}\n                    </div>\n                </template>\n            {% endblock %}\n        </sw-media-collapse>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_media_quickinfo_metadata_content_base %}\n    {% parent %}\n\n    <sw-media-quickinfo-metadata-item\n        v-if="item.metaData.blurhash"\n        class="sw-media-quickinfo-metadata-blurhash"\n        label-name="Blurhash"\n    >\n        <span :title="item.metaData.blurhash">\n            <sw-icon color="green" name="small-default-checkmark-line-small"></sw-icon>\n        </span>\n    </sw-media-quickinfo-metadata-item>\n{% endblock %}\n'},"MQ+w":function(e){e.exports=JSON.parse('{"ecBlurhash":{"notification-center":{"worker-listener":{"hashGeneration":{"title":"Blurhash generation","message":"No Blurhashes remaining. | One Blurhash remaining ... | {n} Blurhashes remaining ...","messageSuccess":"Blurhashes have been generated."}}},"extension":{"sw-media-quickinfo":{"blurredPreview":"Blurred Preview"}}}}')},ZMv6:function(e,a){window.Blurhash={_internal:{utils:{sRGBToLinear:function(e){var a=e/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)},linearTosRGB:function(e){var a=Math.max(0,Math.min(1,e));return a<=.0031308?Math.round(12.92*a*255+.5):Math.round(255*(1.055*Math.pow(a,1/2.4)-.055)+.5)},sign:function(e){return e<0?-1:1},signPow:function(e,a){return Blurhash._internal.utils.sign(e)*Math.pow(Math.abs(e),a)}},base83:{digitCharacters:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],decode83:function(e){for(var a=0,t=0;t<e.length;t++){var n=e[t];a=83*a+Blurhash._internal.base83.digitCharacters.indexOf(n)}return a}},decode:{decodeDC:function(e){var a=e>>16,t=e>>8&255,n=255&e;return[Blurhash._internal.utils.sRGBToLinear(a),Blurhash._internal.utils.sRGBToLinear(t),Blurhash._internal.utils.sRGBToLinear(n)]},decodeAC:function(e,a){var t=Math.floor(e/361),n=Math.floor(e/19)%19,r=e%19;return[Blurhash._internal.utils.signPow((t-9)/9,2)*a,Blurhash._internal.utils.signPow((n-9)/9,2)*a,Blurhash._internal.utils.signPow((r-9)/9,2)*a]},validateBlurhash:function(e){if(!e||e.length<6)throw new Error("The blurhash string must be at least 6 characters");var a=Blurhash._internal.base83.decode83(e[0]),t=Math.floor(a/9)+1,n=a%9+1;if(e.length!==4+2*n*t)throw new Error("blurhash length mismatch: was ".concat(e.length," but it should be ").concat(4+2*n*t))}}},isValid:function(e){try{Blurhash._internal.decode.validateBlurhash(e)}catch(e){return{result:!1,errorReason:e.message}}return{result:!0}},decodeBlurhash:function(e,a,t,n){Blurhash._internal.decode.validateBlurhash(e),n|=1;for(var r=Blurhash._internal.base83.decode83(e[0]),s=Math.floor(r/9)+1,i=r%9+1,o=(Blurhash._internal.base83.decode83(e[1])+1)/166,l=new Array(i*s),h=0;h<l.length;h++){var u;0===h?(u=Blurhash._internal.base83.decode83(e.substring(2,6)),l[h]=Blurhash._internal.decode.decodeDC(u)):(u=Blurhash._internal.base83.decode83(e.substring(4+2*h,6+2*h)),l[h]=Blurhash._internal.decode.decodeAC(u,o*n))}for(var c=4*a,d=new Uint8ClampedArray(c*t),m=0;m<t;m++)for(var g=0;g<a;g++){for(var f=0,p=0,B=0,w=0;w<s;w++)for(var b=0;b<i;b++){var v=Math.cos(Math.PI*g*b/a)*Math.cos(Math.PI*m*w/t),_=l[b+w*i];f+=_[0]*v,p+=_[1]*v,B+=_[2]*v}var k=Blurhash._internal.utils.linearTosRGB(f),N=Blurhash._internal.utils.linearTosRGB(p),I=Blurhash._internal.utils.linearTosRGB(B);d[4*g+0+m*c]=k,d[4*g+1+m*c]=N,d[4*g+2+m*c]=I,d[4*g+3+m*c]=255}return d},pixelsToCanvas:function(e,a,t){const n=document.createElement("canvas");n.width=a,n.height=t;const r=n.getContext("2d"),s=new ImageData(e,a,t);return r.putImageData(s,0,0),n},pixelsToBase64:function(e,a,t,n,r){return Blurhash.pixelsToCanvas(e,a,t).toDataURL(r||"image/jpeg",n||1)}},window.ecBlurhash={config:{decodeDelay:200},imageNodes:[],imageNodesPostponed:[],placeholders:{},placeholderBase64:function(e,a){var t=e+"_"+a;if(ecBlurhash.placeholders[t])return ecBlurhash.placeholders[t];var n=document.createElement("canvas");return n.width=e,n.height=a,ecBlurhash.placeholders[t]=n.toDataURL("image/webp",1)},isImageCached:function(e){var a=new Image;a.src=e;var t=a.complete;return a.src="",t},isInViewport:function(e){var a=e.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth;return(a.top>=0&&a.top<=t||a.bottom<=0&&a.bottom>=-1*t)&&(a.left>=0&&a.left<=n||a.right<=0&&a.right>=-1*n)},isAncestorsVisible:function(e){var a=!0;do{var t=getComputedStyle(e);a=!(0===Number(t.opacity)||"none"===t.display),e=e.parentElement}while(null!==e&&!0===a);return a},prepareNode:function(e){var a=e.attributes.getNamedItem("data-blurhash");if(a&&!ecBlurhash.isImageCached(e.src)){var t,n=a.value,r=e.attributes.getNamedItem("data-ow"),s=e.attributes.getNamedItem("data-oh"),i=r?Number(r.value):0,o=s?Number(s.value):0;if(!isNaN(i)&&0!==i&&!isNaN(o)&&0!==o)(t=e.cloneNode(!0)).srcset="",e.onload=function(){t.srcset=this.srcset,t.src=this.src,t.removeAttribute("data-blurhash-placeholder"),t.removeAttribute("data-blurhash"),this.remove(),this.onload=null},t.src=ecBlurhash.placeholderBase64(i,o),t.setAttribute("data-blurhash-placeholder","1"),e.style.height="0",e.style.width="0",e.parentNode.insertBefore(t,e),ecBlurhash.imageNodes.unshift({node:e,hash:n,height:o,width:i,placeholder:t})}},mutationHandler:function(e,a){for(var t of e)for(var n of t.addedNodes)n.nodeType===Node.ELEMENT_NODE&&"IMG"===n.tagName&&!1===n.hasAttribute("data-blurhash-placeholder")&&ecBlurhash.prepareNode(n)},decodeHashForImage:function(e){setTimeout((function(){if(e.placeholder.hasAttribute("data-blurhash")){var a=Blurhash.decodeBlurhash(e.hash,e.width,e.height);e.placeholder.hasAttribute("data-blurhash")&&(e.placeholder.src=Blurhash.pixelsToBase64(a,e.width,e.height)),e.placeholder.removeAttribute("data-blurhash")}}),ecBlurhash.config.decodeDelay)},onDomInteractive:function(){for(;ecBlurhash.imageNodes.length;){var e=ecBlurhash.imageNodes.pop();ecBlurhash.isAncestorsVisible(e.node)&&("complete"===document.readyState||ecBlurhash.isInViewport(e.node))?ecBlurhash.decodeHashForImage(e):ecBlurhash.imageNodesPostponed.unshift(e)}},onDomComplete:function(){for(;ecBlurhash.imageNodesPostponed.length;){var e=ecBlurhash.imageNodesPostponed.pop();ecBlurhash.decodeHashForImage(e)}}}},aIzF:function(e){e.exports=JSON.parse('{"ecBlurhash":{"notification-center":{"worker-listener":{"hashGeneration":{"title":"Blurhash generierung","message":"Keine Blurhashes verbleibend. | Ein Blurhash verbleibend ... | {n} Blurhashes verbleibend ...","messageSuccess":"Blurhashes wurden generiert."}}},"extension":{"sw-media-quickinfo":{"blurredPreview":"Blurred Vorschau"}}}}')},hSmX:function(e,a){Shopware.Component.override("sw-system-config",{computed:{salesChannelSwitchable(){return"EcBlurHash.config"!==this.domain&&this.$props.salesChannelSwitchable}}})},pyVI:function(e,a){!function(e){const a={},t="EyeCook\\BlurHash\\Message\\GenerateHashMessage",n=function(e,{entry:t,$root:n,notification:r}){!function(e,a,t,n,r,s,i,o=1){let l=null,h=!1;a.hasOwnProperty(e)&&(l=a[e].notificationId,h=a[e].didSendForegroundMessage),n.size&&(n.size*=o);const u={title:r.$tc(i.title),message:r.$tc(i.message,n.size),variant:"info",metadata:{size:n.size},growl:!1,isLoading:!0};if(n.size&&null===l&&(s.create(u).then((t=>{l=t,a[e]={notificationId:l,didSendForegroundMessage:!1}})),t()),null!==l){if(u.uuid=l,0===n.size){if(u.title=r.$tc(i.title),u.message=r.$t(i.success),u.isLoading=!1,i.foregroundSuccessMessage&&!h){const t=Object.assign({},u);t.message=r.$t(i.foregroundSuccessMessage),delete t.uuid,delete t.isLoading,t.growl=!0,t.variant="success",s.create(t),a[e]={notificationId:l,didSendForegroundMessage:!0}}delete a[e]}s.update(u)}t()}("blurhashes",a,e,t,n,r,{title:"ecBlurhash.notification-center.worker-listener.hashGeneration.title",message:"ecBlurhash.notification-center.worker-listener.hashGeneration.message",success:"ecBlurhash.notification-center.worker-listener.hashGeneration.success"})};e.register("GenerateHashMessage",{name:t,fn:n}),e.initialize().use(function(e,a){return(t,n)=>{const r=n.queue.find((a=>a.name===e))||null,s={...n,entry:r,name:e};null===r?t():a.call(null,t,s)}}(t,n))}(Shopware.Application.getContainer("factory").workerNotification)}},[["EIxV","runtime"]]]);