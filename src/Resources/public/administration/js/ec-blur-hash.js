(this.webpackJsonp=this.webpackJsonp||[]).push([["ec-blur-hash"],{EIxV:function(e,t,n){"use strict";n.r(t);var r,i=n("aIzF"),a=n("MQ+w");function s(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,i)}(r=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Shopware.Application.getContainer("factory"),(n=t.locale).extend("de-DE",i),n.extend("en-GB",a),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function o(e){s(a,n,i,o,l,"next",e)}function l(e){s(a,n,i,o,l,"throw",e)}o(void 0)}))})().catch();n("ZMv6"),n("pyVI");var o=n("ESjS"),l=n.n(o);Shopware.Component.override("sw-media-quickinfo",{template:l.a,computed:{ecbBluredImage:function(){var e=this.item.metaData,t=e.blurhash,n=e.height,r=e.width;if(!t||!Blurhash.isValid(t))return null;var i=Blurhash.decodeBlurhash(t,r,n);return Blurhash.pixelsToBase64(i,r,n)}},methods:{}});n("hSmX")},ESjS:function(e,t){e.exports='{% block sw_media_quickinfo_preview %}\n    {% parent %}\n\n    {% block sw_media_quickinfo_blurred_preview %}\n        <sw-media-collapse\n            v-if="item.hasFile && ecbBluredImage"\n            :expandOnLoading="false"\n            :title="$tc(\'sw-media.sidebar.sections.preview\')"\n        >\n            {% block sw_media_quickinfo_blurred_preview_content %}\n                <template #content>\n                    <div>\n                        {% block sw_media_quickinfo_blurred_preview_item %}\n                            <img :src="ecbBluredImage" alt="Blurred version the original Image" class="hidden">\n                        {% endblock %}\n                    </div>\n                </template>\n            {% endblock %}\n        </sw-media-collapse>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_media_quickinfo_metadata_content_base %}\n    {% parent %}\n\n    <sw-media-quickinfo-metadata-item\n        v-if="item.metaData.blurhash"\n        class="sw-media-quickinfo-metadata-blurhash"\n        label-name="Blurhash"\n    >\n        <span :title="item.metaData.blurhash">\n            <sw-icon color="green" name="small-default-checkmark-line-small"></sw-icon>\n        </span>\n    </sw-media-quickinfo-metadata-item>\n{% endblock %}\n'},"MQ+w":function(e){e.exports=JSON.parse('{"ecBlurhash":{"notification-center":{"worker-listener":{"hashGeneration":{"title":"Blurhash generation","message":"No Blurhashes remaining. | One Blurhash remaining ... | {n} Blurhashes remaining ...","success":"Blurhashes have been generated."}}},"extension":{"sw-media-quickinfo":{"blurredPreview":"Blurred Preview"}}}}')},ZMv6:function(e,t){window.Blurhash={_internal:{utils:{D:3294.6,E:269.025,PI:Math.PI,PI2:2*Math.PI,sRGBToLinear:function(e){return e>10.31475?Math.pow(e/Blurhash._internal.utils.E+.052132,2.4):e/Blurhash._internal.utils.D},linearTosRGB:function(e){return~~(e>1227e-8?Blurhash._internal.utils.E*Math.pow(e,.416666)-13.025:e*Blurhash._internal.utils.D+1)},sign:function(e){return e<0?-1:1},signPow:function(e,t){return Blurhash._internal.utils.sign(e)*Math.pow(Math.abs(e),t)},signSqr:function(e){return(e<0?-1:1)*e*e},fastCos:function(e){for(e+=Blurhash._internal.utils.PI/2;e>Blurhash._internal.utils.PI;)e-=Blurhash._internal.utils.PI2;var t=1.27323954*e-.405284735*Blurhash._internal.utils.signSqr(e);return.225*(Blurhash._internal.utils.signSqr(t)-t)+t}},base83:{digit:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",decode83:function(e,t,n){for(var r=0;t<n;)r*=83,r+=Blurhash._internal.base83.digit.indexOf(e[t++]);return r}}},decodeBlurhash:function(e,t,n,r){var i=Blurhash._internal.base83.decode83(e,0,1),a=i%9+1,s=1+~~(i/9),o=a*s,l=(Blurhash._internal.base83.decode83(e,1,2)+1)/13446*(1|r),u=new Float64Array(3*o),c=Blurhash._internal.base83.decode83(e,2,6);u[0]=Blurhash._internal.utils.sRGBToLinear(c>>16),u[1]=Blurhash._internal.utils.sRGBToLinear(c>>8&255),u[2]=Blurhash._internal.utils.sRGBToLinear(255&c);var h=0,d=0,f=0,m=0,g=0,b=0,p=0,w=0,B=0,v=0,_=0,k=0,S=0;for(h=1;h<o;h++)c=Blurhash._internal.base83.decode83(e,4+2*h,6+2*h),u[3*h]=Blurhash._internal.utils.signSqr(~~(c/361)-9)*l,u[3*h+1]=Blurhash._internal.utils.signSqr(~~(c/19)%19-9)*l,u[3*h+2]=Blurhash._internal.utils.signSqr(c%19-9)*l;var y=4*t,I=new Uint8ClampedArray(y*n);for(m=0;m<n;m++)for(k=Blurhash._internal.utils.PI*m/n,f=0;f<t;f++){for(g=0,b=0,p=0,S=Blurhash._internal.utils.PI*f/t,d=0;d<s;d++)for(B=Blurhash._internal.utils.fastCos(k*d),h=0;h<a;h++)w=Blurhash._internal.utils.fastCos(S*h)*B,g+=u[v=3*(h+d*a)]*w,b+=u[v+1]*w,p+=u[v+2]*w;I[_=4*f+m*y]=Blurhash._internal.utils.linearTosRGB(g),I[_+1]=Blurhash._internal.utils.linearTosRGB(b),I[_+2]=Blurhash._internal.utils.linearTosRGB(p),I[_+3]=255}return I},pixelsToCanvas:function(e,t,n){var r=document.createElement("canvas");r.width=t,r.height=n;var i=r.getContext("2d"),a=new ImageData(e,t,n);return i.putImageData(a,0,0),r},pixelsToBase64:function(e,t,n,r,i){return Blurhash.pixelsToCanvas(e,t,n).toDataURL(i||"image/jpeg",r||1)},onPixelsToBlobSrc:function(e,t,n,r,i,a){Blurhash.pixelsToCanvas(t,n,r).toBlob((function(t){var n=document.createElement("img"),r=URL.createObjectURL(t);n.onload=function(){URL.revokeObjectURL(r)},e(r)}),a||"image/jpeg",i||1)}},window.ecbUtils={nestedCallback:function(e,t){return function(){e.call(this),t.call(this)}},getViewport:function(){return{height:window.innerHeight||document.documentElement.clientHeight,width:window.innerWidth||document.documentElement.clientWidth}},getNodeAttribute:function(e,t){var n=e.attributes.getNamedItem(t);return n?n.value:null},decodeHashForNode:function(e,t,n){t=t||e.node,setTimeout((function(){if(!1===t.complete){var r=Blurhash.decodeBlurhash(e.hash,e.width,e.height);Blurhash.onPixelsToBlobSrc((function(e){!0===t.complete?n(null):n(e)}),r,e.width,e.height)}else n(null)}),200)},extractNode:function(e){var t=ecbUtils.getNodeAttribute(e,"data-blurhash"),n=ecbUtils.getNodeAttribute(e,"data-src");if(!t)return null;var r=Number(ecbUtils.getNodeAttribute(e,"data-ow")),i=Number(ecbUtils.getNodeAttribute(e,"data-oh")),a=ecbUtils.getNodeAttribute(e,"srcset")||ecbUtils.getNodeAttribute(e,"data-srcset");return isNaN(r)||0===r||isNaN(i)||0===i?(n&&(e.src=n),null):{hash:t,width:r,height:i,srcset:a,node:e}},isAncestorsVisible:function(e){var t=!0;do{var n=getComputedStyle(e);t=!(0===Number(n.opacity)||"none"===n.display),e=e.parentElement}while(null!==e&&!0===t);return t},isImageCached:function(e){var t=new Image;t.src=e;var n=t.complete;return t.src="",n},isInViewport:function(e){var t=e.getBoundingClientRect(),n=ecbUtils.getViewport();return t.top>0&&t.bottom>0||t.bottom-n.height>0&&t.top<0||-1*(t.top-n.height)>0&&t.bottom-n.height>0||-1*(t.bottom-n.height)>0&&t.top+n.height<0}}},aIzF:function(e){e.exports=JSON.parse('{"ecBlurhash":{"notification-center":{"worker-listener":{"hashGeneration":{"title":"Blurhash generierung","message":"Keine Blurhashes verbleibend. | Ein Blurhash verbleibend ... | {n} Blurhashes verbleibend ...","success":"Blurhashes wurden generiert."}}},"extension":{"sw-media-quickinfo":{"blurredPreview":"Blurred Vorschau"}}}}')},hSmX:function(e,t){Shopware.Component.override("sw-system-config",{computed:{salesChannelSwitchable:function(){return"EyecookBlurhash.config"!==this.domain&&this.$props.salesChannelSwitchable}}})},pyVI:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,s,o,l;a=Shopware.Application.getContainer("factory").workerNotification,s={},o="Eyecook\\Blurhash\Message\\GenerateHashMessage",l=function(e,t){var n=t.entry,r=t.$root,i=t.notification;!function(e,t,n,r,i,a,s){var o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=null,u=!1;t.hasOwnProperty(e)&&(l=t[e].notificationId,u=t[e].didSendForegroundMessage),r.size&&(r.size*=o);var c={title:i.$tc(s.title),message:i.$tc(s.message,r.size),variant:"info",metadata:{size:r.size},growl:!1,isLoading:!0};if(r.size&&null===l&&(a.create(c).then((function(n){l=n,t[e]={notificationId:l,didSendForegroundMessage:!1}})),n()),null!==l){if(c.uuid=l,0===r.size){if(c.title=i.$tc(s.title),c.message=i.$t(s.success),c.isLoading=!1,s.foregroundSuccessMessage&&!u){var h=Object.assign({},c);h.message=i.$t(s.foregroundSuccessMessage),delete h.uuid,delete h.isLoading,h.growl=!0,h.variant="success",a.create(h),t[e]={notificationId:l,didSendForegroundMessage:!0}}delete t[e]}a.update(c)}n()}("blurhashes",s,e,n,r,i,{title:"ecBlurhash.notification-center.worker-listener.hashGeneration.title",message:"ecBlurhash.notification-center.worker-listener.hashGeneration.message",success:"ecBlurhash.notification-center.worker-listener.hashGeneration.success"})},a.register("GenerateHashMessage",{name:o,fn:l}),a.initialize().use(function(e,t){return function(n,i){var a=i.queue.find((function(t){return t.name===e}))||null,s=r(r({},i),{entry:a,name:e});null===a?n():t.call(null,n,s)}}(o,l))}},[["EIxV","runtime"]]]);