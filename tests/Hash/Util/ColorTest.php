<?php declare(strict_types=1);

namespace Eyecook\Blurhash\Test\Hash\Util;

use Eyecook\Blurhash\Hash\Util\Color;
use PHPUnit\Framework\TestCase;

/**
 * @author David Fecke (+leptoquark) Performance tweaks
 */
class ColorTest extends TestCase
{
    /**
     * @dataProvider getSrgbValues
     */
    public function testToLinear(int $byte, float $expected): void
    {
        self::assertEqualsWithDelta($expected, Color::toLinear($byte), .000001);
    }

    public function getSrgbValues(): array
    {
        return [
            [0, 0],
            [1, 0.0003035269835488375],
            [2, 0.000607053967097675],
            [3, 0.0009105809506465125],
            [4, 0.00121410793419535],
            [5, 0.0015176349177441874],
            [6, 0.001821161901293025],
            [7, 0.0021246888848418626],
            [8, 0.0024282158683907],
            [9, 0.0027317428519395373],
            [10, 0.003035269835488375],
            [11, 0.003346535763899161],
            [12, 0.003676507324047436],
            [13, 0.004024717018496307],
            [14, 0.004391442037410293],
            [15, 0.004776953480693729],
            [16, 0.005181516702338386],
            [17, 0.005605391624202723],
            [18, 0.006048833022857055],
            [19, 0.006512090792594474],
            [20, 0.006995410187265387],
            [21, 0.007499032043226175],
            [22, 0.008023192985384994],
            [23, 0.008568125618069307],
            [24, 0.009134058702220787],
            [25, 0.009721217320237847],
            [26, 0.010329823029626938],
            [27, 0.010960094006488246],
            [28, 0.011612245179743887],
            [29, 0.012286488356915872],
            [30, 0.012983032342173012],
            [31, 0.013702083047289686],
            [32, 0.014443843596092545],
            [33, 0.01520851442291271],
            [34, 0.01599629336550963],
            [35, 0.016807375752887384],
            [36, 0.017641954488384078],
            [37, 0.018500220128379697],
            [38, 0.019382360956935723],
            [39, 0.0202885630566524],
            [40, 0.021219010376003558],
            [41, 0.02217388479338738],
            [42, 0.02315336617811041],
            [43, 0.024157632448504756],
            [44, 0.025186859627361627],
            [45, 0.026241221894849898],
            [46, 0.027320891639074897],
            [47, 0.028426039504420793],
            [48, 0.0295568344378088],
            [49, 0.030713443732993635],
            [50, 0.03189603307301153],
            [51, 0.033104766570885055],
            [52, 0.03433980680868217],
            [53, 0.03560131487502034],
            [54, 0.03688945040110004],
            [55, 0.0382043715953465],
            [56, 0.03954623527673283],
            [57, 0.04091519690685319],
            [58, 0.042311410620809675],
            [59, 0.043735029256973465],
            [60, 0.04518620438567554],
            [61, 0.0466650863368801],
            [62, 0.048171824226889426],
            [63, 0.04970656598412723],
            [64, 0.05126945837404324],
            [65, 0.052860647023180246],
            [66, 0.05448027644244237],
            [67, 0.05612849004960009],
            [68, 0.05780543019106723],
            [69, 0.0595112381629812],
            [70, 0.06124605423161761],
            [71, 0.06301001765316767],
            [72, 0.06480326669290577],
            [73, 0.06662593864377289],
            [74, 0.06847816984440017],
            [75, 0.07036009569659588],
            [76, 0.07227185068231748],
            [77, 0.07421356838014963],
            [78, 0.07618538148130785],
            [79, 0.07818742180518633],
            [80, 0.08021982031446831],
            [81, 0.0822827071298148],
            [82, 0.08437621154414882],
            [83, 0.08650046203654976],
            [84, 0.08865558628577294],
            [85, 0.09084171118340767],
            [86, 0.09305896284668747],
            [87, 0.0953074666309647],
            [88, 0.09758734714186246],
            [89, 0.09989872824711389],
            [90, 0.1022417330881013],
            [91, 0.10461648409110419],
            [92, 0.10702310297826761],
            [93, 0.10946171077829933],
            [94, 0.1119324278369056],
            [95, 0.11443537382697373],
            [96, 0.11697066775851084],
            [97, 0.11953842798834562],
            [98, 0.12213877222960187],
            [99, 0.12477181756095049],
            [100, 0.12743768043564743],
            [101, 0.1301364766903643],
            [102, 0.13286832155381798],
            [103, 0.13563332965520566],
            [104, 0.13843161503245183],
            [105, 0.14126329114027164],
            [106, 0.14412847085805777],
            [107, 0.14702726649759498],
            [108, 0.14995978981060856],
            [109, 0.15292615199615017],
            [110, 0.1559264637078274],
            [111, 0.1589608350608804],
            [112, 0.16202937563911096],
            [113, 0.1651321945016676],
            [114, 0.16826940018969075],
            [115, 0.1714411007328226],
            [116, 0.17464740365558504],
            [117, 0.17788841598362914],
            [118, 0.18116424424986022],
            [119, 0.184474994500441],
            [120, 0.18782077230067787],
            [121, 0.1912016827407914],
            [122, 0.19461783044157582],
            [123, 0.19806931955994886],
            [124, 0.20155625379439707],
            [125, 0.20507873639031693],
            [126, 0.20863687014525575],
            [127, 0.21223075741405523],
            [128, 0.21586050011389923],
            [129, 0.21952619972926923],
            [130, 0.2232279573168085],
            [131, 0.22696587351009836],
            [132, 0.23074004852434915],
            [133, 0.23455058216100522],
            [134, 0.238397573812271],
            [135, 0.24228112246555486],
            [136, 0.24620132670783548],
            [137, 0.25015828472995344],
            [138, 0.25415209433082675],
            [139, 0.2581828529215958],
            [140, 0.26225065752969623],
            [141, 0.26635560480286247],
            [142, 0.2704977910130658],
            [143, 0.27467731206038465],
            [144, 0.2788942634768104],
            [145, 0.2831487404299921],
            [146, 0.2874408377269175],
            [147, 0.29177064981753587],
            [148, 0.2961382707983211],
            [149, 0.3005437944157765],
            [150, 0.3049873140698863],
            [151, 0.30946892281750854],
            [152, 0.31398871337571754],
            [153, 0.31854677812509186],
            [154, 0.32314320911295075],
            [155, 0.3277780980565422],
            [156, 0.33245153634617935],
            [157, 0.33716361504833037],
            [158, 0.341914424908661],
            [159, 0.3467040563550296],
            [160, 0.35153259950043936],
            [161, 0.3564001441459435],
            [162, 0.3613067797835095],
            [163, 0.3662525955988395],
            [164, 0.3712376804741491],
            [165, 0.37626212299090644],
            [166, 0.3813260114325301],
            [167, 0.386429433787049],
            [168, 0.39157247774972326],
            [169, 0.39675523072562685],
            [170, 0.40197777983219574],
            [171, 0.4072402119017367],
            [172, 0.41254261348390375],
            [173, 0.4178850708481375],
            [174, 0.4232676699860717],
            [175, 0.4286904966139067],
            [176, 0.4341536361747489],
            [177, 0.4396571738409188],
            [178, 0.44520119451622786],
            [179, 0.45078578283822346],
            [180, 0.45641102318040466],
            [181, 0.4620769996544071],
            [182, 0.467783796112159],
            [183, 0.47353149614800955],
            [184, 0.4793201831008268],
            [185, 0.4851499400560704],
            [186, 0.4910208498478356],
            [187, 0.4969329950608704],
            [188, 0.5028864580325687],
            [189, 0.5088813208549338],
            [190, 0.5149176653765214],
            [191, 0.5209955732043543],
            [192, 0.5271151257058131],
            [193, 0.5332764040105052],
            [194, 0.5394794890121071],
            [195, 0.5457244613701866],
            [196, 0.5520114015120001],
            [197, 0.5583403896342679],
            [198, 0.5647115057049292],
            [199, 0.5711248294648731],
            [200, 0.5775804404296506],
            [201, 0.5840784178911641],
            [202, 0.5906188409193369],
            [203, 0.5972017883637634],
            [204, 0.6038273388553378],
            [205, 0.6104955708078648],
            [206, 0.6172065624196511],
            [207, 0.6239603916750761],
            [208, 0.6307571363461468],
            [209, 0.6375968739940326],
            [210, 0.6444796819705821],
            [211, 0.6514056374198242],
            [212, 0.6583748172794486],
            [213, 0.665387298282272],
            [214, 0.6724431569576875],
            [215, 0.6795424696330938],
            [216, 0.6866853124353134],
            [217, 0.6938717612919899],
            [218, 0.7011018919329731],
            [219, 0.7083757798916868],
            [220, 0.7156935005064807],
            [221, 0.7230551289219693],
            [222, 0.7304607400903537],
            [223, 0.7379104087727308],
            [224, 0.7454042095403874],
            [225, 0.7529422167760779],
            [226, 0.7605245046752924],
            [227, 0.7681511472475071],
            [228, 0.7758222183174236],
            [229, 0.7835377915261935],
            [230, 0.7912979403326302],
            [231, 0.799102738014409],
            [232, 0.8069522576692516],
            [233, 0.8148465722161012],
            [234, 0.8227857543962835],
            [235, 0.8307698767746546],
            [236, 0.83879901174074],
            [237, 0.846873231509858],
            [238, 0.8549926081242338],
            [239, 0.8631572134541023],
            [240, 0.8713671191987973],
            [241, 0.8796223968878317],
            [242, 0.8879231178819663],
            [243, 0.8962693533742664],
            [244, 0.9046611743911496],
            [245, 0.9130986517934192],
            [246, 0.9215818562772946],
            [247, 0.9301108583754237],
            [248, 0.938685728457888],
            [249, 0.9473065367331999],
            [250, 0.9559733532492861],
            [251, 0.9646862478944651],
            [252, 0.9734452903984125],
            [253, 0.9822505503331171],
            [254, 0.9911020971138298],
            [255, 1]
        ];
    }
}
